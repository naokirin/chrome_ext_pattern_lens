# Pattern Lens

Chrome拡張機能：正規表現とDOM要素検索に対応した高度なページ内検索ツール

## 機能

- **正規表現検索**: 柔軟なパターンマッチングによる検索
- **要素検索**: CSSセレクタとXPathによるDOM要素の検索
- **ハイライト表示**: 検索結果を視覚的に強調表示
- **カスタマイズ可能**: デフォルト設定をオプションページで保存

## インストール方法

1. このリポジトリをクローンまたはダウンロード
2. Chromeで `chrome://extensions/` を開く
3. 右上の「デベロッパーモード」を有効にする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. プロジェクトのルートディレクトリを選択

## 使い方

### 基本的な検索

1. 拡張機能アイコンをクリックしてポップアップを開く
2. 検索キーワードを入力
3. 「検索」ボタンをクリック

### 正規表現検索

1. 「正規表現」チェックボックスをONにする
2. 正規表現パターンを入力（例: `\d{3}-\d{4}` で郵便番号を検索）
3. 「検索」ボタンをクリック

### 要素検索

1. 「要素検索」チェックボックスをONにする
2. ドロップダウンから「CSSセレクタ」または「XPath」を選択
3. セレクタまたはXPathを入力
   - CSSセレクタ例: `.article > h2`, `#main-content`
   - XPath例: `//div[@class='content']//p`
4. 「検索」ボタンをクリック

### ハイライトのクリア

「クリア」ボタンをクリックすると、すべてのハイライトが削除されます。

## 設定

拡張機能アイコンを右クリック → 「オプション」から設定ページを開けます。

- **正規表現をデフォルトで有効**: 拡張機能を開いた際に正規表現モードを自動的にONにします
- **要素検索をデフォルトで有効**: 拡張機能を開いた際に要素検索モードを自動的にONにします

## プロジェクト構成

```
chrome_ext_pattern_lens/
├── manifest.json              # 拡張機能の設定ファイル
├── icons/                     # 拡張機能のアイコン
├── popup/                     # ポップアップUI
│   ├── popup.html
│   └── popup.js
├── options/                   # 設定ページ
│   ├── options.html
│   └── options.js
└── content_scripts/          # コンテンツスクリプト
    └── main.js
```

## 技術スタック

- Manifest V3
- Vanilla JavaScript (フレームワークなし)
- Chrome Extension APIs
  - `chrome.storage.sync`: 設定の保存
  - `chrome.tabs`: タブとの通信
  - `chrome.runtime`: メッセージング

## 開発

### 必要なツール

- Google Chrome
- テキストエディタ（VS Code、Cursor推奨）

### デバッグ

1. `chrome://extensions/` でデベロッパーモードを有効化
2. 拡張機能の「エラー」リンクでエラーログを確認
3. ポップアップを右クリック → 「検証」でDevToolsを開く
4. コンテンツスクリプトは通常のページDevToolsで確認可能

### リロード

コードを変更した後は、`chrome://extensions/` で拡張機能のリロードボタンをクリックしてください。

## ライセンス

MIT License

## 注意事項

- 大量のテキストを含むページでは、検索に時間がかかる場合があります
- 複雑な正規表現はパフォーマンスに影響する可能性があります
- 一部のウェブサイトではContent Security Policyにより動作が制限される場合があります
